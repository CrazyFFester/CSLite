using System;
using System.Collections.Generic;
using System.Linq;

namespace Aquarium
{
    class Program
    {
        private static void Main()
        {
            Fishes[] fishes = new Fishes[0];
            AquariumInhabitants aquariumInhabitants = new AquariumInhabitants();

            while (true)
            {
                Console.SetCursorPosition(0, 18);
                aquariumInhabitants.ShowInhabitantsOfAquarium(fishes);
                Console.SetCursorPosition(0, 0);

                aquariumInhabitants.ElementConditionCheck(ref fishes);
                СommandProcessing(ref fishes, aquariumInhabitants);

                Console.Clear();
            }
        }

        private static void СommandProcessing(ref Fishes[] fishes, AquariumInhabitants aquariumInhabitants)
        {
            int fishNumber;

            Console.WriteLine("Выберите команду:" +
            "\n1)Добавить рыбу" +
            "\n2)Достать рыбу");

            switch (Convert.ToInt32(Console.ReadLine()))
            {
                case 1:
                    aquariumInhabitants.AddElement(ref fishes);
                    break;
                case 2:
                    Console.WriteLine("\nВвведите номер рыбы, которую хотите достать:");
                    fishNumber = Convert.ToInt32(Console.ReadLine()) - 1;
                    aquariumInhabitants.DeleteElement(ref fishes, fishNumber);
                    break;
                default:
                    Console.WriteLine("Такой команды нет!!!");
                    break;
            }
        }
        class Fishes : AquariumInhabitants
        {
            public Fishes(int ageOfFish, int maximumAgeOfFish)
            {
                AgeOfFish = ageOfFish;
                MaximumAgeOfFish = maximumAgeOfFish;
            }
            public void ShowInfo(int i)
            {
                Console.WriteLine($"{i + 1}){AgeOfFish}/{MaximumAgeOfFish}");
            }
        }
        class AquariumInhabitants
        {
            protected int AgeOfFish;
            protected int MaximumAgeOfFish;

            public void AddElement(ref Fishes[] fishes)
            {
                Fishes[] tempFishes = new Fishes[fishes.Length + 1];
                tempFishes[tempFishes.Length - 1] = new Fishes(0, 10);
                for (int i = 0; i < fishes.Length; i++)
                {
                    tempFishes[i] = fishes[i];
                }
                fishes = tempFishes;
            }

            public void ShowInhabitantsOfAquarium(Fishes[] fishes)
            {
                Console.WriteLine("\nРыбы в аквариуме:");
                for (int i = 0; i < fishes.Length; i++)
                {
                    fishes[i].ShowInfo(i);
                    fishes[i].AgeOfFish++;
                }
            }

            public void DeleteElement(ref Fishes[] fishes, int fishNumber)
            {
                for (int i = 0; i < fishes.Length; i++)
                {
                    if (fishNumber == i)
                    {
                        List<Fishes> tempFishes = fishes.ToList();
                        tempFishes.RemoveAt(i);
                        fishes = tempFishes.ToArray();
                    }
                }
            }

            public void ElementConditionCheck(ref Fishes[] fishes)
            {
                for (int i = 0; i < fishes.Length; i++)
                {
                    if (fishes[i].AgeOfFish == fishes[i].MaximumAgeOfFish)
                    {
                        Console.WriteLine($"Одна из рыб умерла, она будет убрана из акавариума.\n");
                        DeleteElement(ref fishes, i);
                    }
                }
            }
        }
    }
}
