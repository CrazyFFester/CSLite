using System;

namespace PassengerTrainConfigurator
{
    class Program
    {
        private static void Main()
        {
            int numberOfPassengers = 0;
            Train train = new Train();
            bool programState = true;

            while (true)
            {
                Console.Write("Введите точку отправления: ");
                string pointOfDeparture = Console.ReadLine();
                Console.Write("Введите точку остановки: ");
                string stayPoint = Console.ReadLine();
                Direction direction = new Direction(pointOfDeparture, stayPoint);
                Console.Clear();

                direction.ShowInfo();
                SellTickets(ref numberOfPassengers);

                if (numberOfPassengers == 0)
                {
                    Console.WriteLine("Поезд пуст!");
                }
                else
                {
                    Console.WriteLine("\nКоличество пассажиров - " + numberOfPassengers);
                    train.AmountOfRailwayCarriage(numberOfPassengers, ref programState);
                    if (programState == true)
                    {
                        Console.WriteLine("\nПоезд успешно отправлен!");
                    }
                }
                Console.ReadKey();
                Console.Clear();
            }
        }

        private static void SellTickets(ref int numberOfPassengers)
        {
            Random randomValue = new Random();
            numberOfPassengers = randomValue.Next(0, 51);
        }
    }

    class Train
    {
        private int _amountRailwayCarriage;
        public void AmountOfRailwayCarriage(int numberOfPassengers, ref bool programState)
        {
            int numberOfSeats = 0;
            Console.Write("\nСколько будет вагонов: ");
            _amountRailwayCarriage = Convert.ToInt32(Console.ReadLine());
            RailwayCarriage[] railwayCarriage = new RailwayCarriage[_amountRailwayCarriage];
            for (int i = 0; i < _amountRailwayCarriage; i++)
            {
                Console.Write($"Сколько будет мест в {i + 1} вагоне: ");
                railwayCarriage[i] = new RailwayCarriage(Convert.ToInt32(Console.ReadLine()));
                numberOfSeats += railwayCarriage[i]._numberOfSeatsInRailwayCarriage;
            }
            if(numberOfSeats < numberOfPassengers)
            {
                Console.WriteLine("\nМало мест!");
                programState = false;
            }
            else
            {
                ShowAmountOfRailwayCarriage(railwayCarriage);
            }
        }

        public void ShowAmountOfRailwayCarriage(RailwayCarriage[] railwayCarriage)
        {
            Console.WriteLine("\nКоличество вагонов - " + railwayCarriage.Length);
            for(int i = 0; i < railwayCarriage.Length; i++)
            {
                Console.WriteLine($"{i+1} вагон - {railwayCarriage[i]._numberOfSeatsInRailwayCarriage} мест");
            }
        }
    }

    class RailwayCarriage
    {
        public int _numberOfSeatsInRailwayCarriage;
        public RailwayCarriage(int numberOfSeatsInRailwayCarriage)
        {
            _numberOfSeatsInRailwayCarriage = numberOfSeatsInRailwayCarriage;
        }
    }

    class Direction
    {
        private string _pointOfDeparture;
        private string _stayPoint;

        public Direction(string pointOfDeparture, string stayPoint)
        {
            _pointOfDeparture = pointOfDeparture;
            _stayPoint = stayPoint;
        }
        public void ShowInfo()
        {
            Console.WriteLine("Направление:");
            Console.WriteLine($"{_pointOfDeparture} - {_stayPoint}");
        }
    }
}
