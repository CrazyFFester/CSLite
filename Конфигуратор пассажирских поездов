using System;

namespace PassengerTrainConfigurator
{
    class Program
    {
        private static void Main()
        {
            int numberOfPassengers = 0;
            Train train = new Train();
            bool enoughPlaces = true;

            while (true)
            {
                Console.Write("Введите точку отправления: ");
                string pointOfDeparture = Console.ReadLine();
                Console.Write("Введите точку остановки: ");
                string stayPoint = Console.ReadLine();
                Direction direction = new Direction(pointOfDeparture, stayPoint);
                Console.Clear();

                direction.ShowInfo();
                SellTickets(ref numberOfPassengers);

                if (numberOfPassengers == 0)
                {
                    Console.WriteLine("Поезд пуст!");
                }
                else
                {
                    Console.WriteLine("\nКоличество пассажиров - " + numberOfPassengers);
                    train.AmountOfRailwayCarriage(numberOfPassengers, ref enoughPlaces);
                    if(enoughPlaces == true)
                    {
                        Console.WriteLine("\nПоезд успешно отправлен!");
                    }
                }
                Console.ReadKey();
                Console.Clear();
            }
        }

        private static void SellTickets(ref int numberOfPassengers)
        {
            Random randomValue = new Random();
            numberOfPassengers = randomValue.Next(0, 51);
        }
    }

    class Train
    {
        public void AmountOfRailwayCarriage(int numberOfPassengers, ref bool enoughPlaces)
        {
            RailwayCarriage railwayCarriage = new RailwayCarriage();
            int numberOfSeats = 0;

            Console.Write("\nСколько будет вагонов: ");
            int[] arrayOfRailwayCarriage = new int[Convert.ToInt32(Console.ReadLine())];
            for(int i = 0; i < arrayOfRailwayCarriage.Length; i++)
            {
                arrayOfRailwayCarriage[i] = railwayCarriage.NumberOfSeatsInRailwayCarriage(i);
                numberOfSeats += arrayOfRailwayCarriage[i];
            }
            if(numberOfSeats < numberOfPassengers)
            {
                Console.WriteLine("\nМало мест!");
                enoughPlaces = false;
            }
            else
            {
                ShowInfo(arrayOfRailwayCarriage);
            }
        }

        public void ShowInfo(int[] arrayOfRailwayCarriage)
        {
            Console.WriteLine("\nКоличество вагонов - " + arrayOfRailwayCarriage.Length + ":");
            for (int i = 0; i < arrayOfRailwayCarriage.Length; i++)
            {
                Console.WriteLine($"{i + 1} вагон - {arrayOfRailwayCarriage[i]} мест");
            }
        }
    }

    class RailwayCarriage
    {
        private int _numberOfSeatsInRailwayCarriage;
        public int NumberOfSeatsInRailwayCarriage(int i)
        {
            Console.Write($"Сколько будет мест в {i + 1} вагоне: ");
            _numberOfSeatsInRailwayCarriage = Convert.ToInt32(Console.ReadLine());
            return _numberOfSeatsInRailwayCarriage;
        }
    }

    class Direction
    {
        private string _pointOfDeparture;
        private string _stayPoint;

        public Direction(string pointOfDeparture, string stayPoint)
        {
            _pointOfDeparture = pointOfDeparture;
            _stayPoint = stayPoint;
        }
        public void ShowInfo()
        {
            Console.WriteLine("Направление:");
            Console.WriteLine($"{_pointOfDeparture} - {_stayPoint}");
        }
    }
}
