using System;
using System.Collections.Generic;
using System.Linq;

namespace Player_Database
{
    class Program
    {
        private static void Main()
        {
            List list = new List();

            while (true)
            {
                Console.SetCursorPosition(0, 20);
                list.DisplayListOfElement();
                Console.SetCursorPosition(0, 0);

                Console.WriteLine("Команды:" +
                    "\n1)Добавление игрока." +
                    "\n2)Бан игрока." +
                    "\n3)Разбан игрока." +
                    "\n4)Удаление игрока.");
                Console.WriteLine();
                Console.Write("Ответ: ");

                switch (Convert.ToInt32(Console.ReadLine()))
                {
                    case 1:
                        list.AddElement();
                        break;
                    case 2:
                        list.ChangeStateOfElement(true, "забанить");
                        break;
                    case 3:
                        list.ChangeStateOfElement(false, "разбанить");
                        break;
                    case 4:
                        list.DeleteElement();
                        break;
                    default:
                        Console.WriteLine("Такой команды нет!!!");
                        break;
                }

                Console.Clear();
            }
        }
    }

    class Player
    {
        private string _nameOfPLayer;
        private int _level;
        private bool _isBanned;

        public Player(string nameOfPLayer, int level, bool isBanned)
        {
            _nameOfPLayer = nameOfPLayer;
            _level = level;
            _isBanned = isBanned;
        }

        public void ShowInfo(int i)
        {
            Console.WriteLine($"{i + 1})Name - {_nameOfPLayer}, Level - {_level}, Is banned - {_isBanned}.");
        }

        public void StateChange(bool playerState)
        {
            _isBanned = playerState;
        }
    }

    class List
    {
        private Player[] _players = new Player[0];

        public void DeleteElement()
        {
            Console.Write("\nВведите порядковый номер игрока, которого хотите удалить: ");
            int playerIndex = Convert.ToInt32(Console.ReadLine()) - 1;
            for (int i = 0; i < _players.Length; i++)
            {
                if (playerIndex == i)
                {
                    List<Player> tempPlayers = _players.ToList();
                    tempPlayers.RemoveAt(i);
                    _players = tempPlayers.ToArray();
                }
            }
        }

        public void ChangeStateOfElement(bool playerState, string message)
        {
            Console.Write($"\nВведите порядковый номер игрока, которого хотите {message}: ");
            int playerIndex = Convert.ToInt32(Console.ReadLine()) - 1;
            for (int i = 0; i < _players.Length; i++)
            {
                if (playerIndex == i)
                {
                    _players[i].StateChange(playerState);
                }
            }
        }

        public void DisplayListOfElement()
        {
            Console.WriteLine("Список игроков:");
            for (int i = 0; i < _players.Length; i++)
            {
                _players[i].ShowInfo(i);
            }
        }

        public void AddElement()
        {
            string nameOfPLayer;
            int level;
            Player[] tempPlayers = new Player[_players.Length + 1];

            Console.Write("\nВведите имя игрока: ");
            nameOfPLayer = Console.ReadLine();
            Console.Write("Введите уровень игрока: ");
            level = Convert.ToInt32(Console.ReadLine());
            tempPlayers[tempPlayers.Length - 1] = new Player(nameOfPLayer, level, false);

            for (int i = 0; i < _players.Length; i++)
            {
                tempPlayers[i] = _players[i];
            }
            _players = tempPlayers;
        }
    }
}
